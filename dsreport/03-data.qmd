# Data Collection

## Web Scraping

In order to explore the Data Science degrees around Australia Universities, we compiled a list of universities in Australia and the Data Science or related degrees they offered, then web scraped required information from each university's website using R. In total, we collected 298 units from eight postgraduate courses in Data Science across all Group of Eight (Go8) universities.

To start off the project, Professor Tanaka provided sample code for data scraping using Monash Handbook as an example. Libraries `rvest` and `rSelenium` are two of the main tools. Initially, we studied her code and then tried to replicate her code to be applied to other university's websites.

The flow of the data scrapping is as follow:

1.  Identify the main page (url) where the degree information is contained, which usually is the most updated version of the handbook.

2.  Use functions from `rvest` to retrieve all the course unit code (or course unit url). Retrieve the degree code and formal degree name and save it for later.

3.  Use `rSelenium` functions and course unit information, to direct R to the unit information page.

4.  Retrieve the following information from the page using rvest functions:

-   Unit Code

-   Unit Name

-   Unit Overview

-   Unit Learning Outcome

-   Unit Prohibition/ Pre-requisite/ Co-requisite

5.  Repeat step 3 & 4 until all the course information has been retrieved.

6.  Compile all the retrieved data from the University into a dataframe and export it as csv file.

Despite the process being similar for each University, we soon realize the process was going to be more challenging than expect.

### Inconsistent Information

Monash University's student handbook on Degrees and Courses is a spectacular website for data scraping. Its html code is clearly labeled and anything you need to know about the degree/ course can be found on the website. The same cannot be said about other Universities.

The course descriptions on the handbook and universities' website page are usually structured in a different manner, since the majority of the data is collected from universities' handbooks, course descriptions are also extracted from handbooks for consistency purposes.  

In addition, the required unit information listed above is not all available at the targeted universities. The handbook from University of New South Wales contains extremely limited information: unit overview is brief, unit prohibition/ pre-requisite/ co-requisite is only available for a few units, and unit outcome is not provided at all. 

### Difficult to Manage Websites

Each university website is unique. Sometimes the information is not so straightforward. An example of this is University of Adelaide. The main website for the degree does contain the list of units that go into the degree.

However, instead of having just one page with all the unit information, the link takes you to a page with different unit information depending on when the unit is offered and on what campus.

I tried bypassing the pages by directly looking at the url of the final unit information page I want to be on. Unfortunately, the url is not designed or structured in a way which I am able to predict the url based on my unit code. With that said, my only option was to code the function to jump from pages to pages before landing on the right unit information page.

It is also often found that the unit overview and learning outcomes for each unit within the same university could vary slightly in format. For example, unit overview may appears before or after campus location at University of Western Australia, empty spaces could be found after section title at the University of Melbourne, which would break the chain of extracting corresponding information. 

### Collected Data

```{r setup, include = FALSE}
library(tidyverse)
library(kableExtra)
library(DT)

knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      message= FALSE)
theme_set(theme_minimal())
```

```{r read-data, echo=FALSE, message=FALSE, warning=FALSE}
rmv_col <- function(x){
  read_csv(x) %>% 
  select(-`...1`)
}
unidata <- rmv_col("data/unidata.csv")
```

The collected data contains **`r nrow(unidata)` units** from 8 universities, and **`r ncol(unidata)` variables** including School, Course, Course_code, Unit, Unit_code, Outcomes, Overview and Description. The full data set is made available below for exploration.

```{r}
unidata %>% 
  mutate(across(c(Outcomes, Overview, description), 
                ~ str_replace_all(.x, "\\\\", ""))) %>% 
  select(-description) %>% 
  datatable(height = "400px",
            options = list(scrollX = TRUE,
            columnDefs = list(list(className = "dt-center", targets = 1:7)))) %>% 
  formatStyle(columns = colnames(.), fontSize = '30%')
```
